# 大厂真实git开发流程

## 一、开发分支模型分类

目前所在部门使用是主要是四种：dev(开发）、test（测试）、uat（预发）、release（生产）

>  小公司可能就一个dev、一个master 就搞定了，测试都是开发人员自己来

## 二、开发主体流程
1. 需求评审
2. 开发排期
3. 编码开发
4. 冒烟测试（自检验)
5. 冒烟通过，提交测试，合并代码到测试分支，部署测试环境
6. 测试环境测试，开发修bug
7. 测试完成，提交预发，合并代码到预发分支，部署预发环境
8. 预发环境测试，开发修 bug（修完的 bug 要重新走测试再走预发，这个下面会解释）
9. 测试完成，产品验收
10. 验收完成，提交生产，合并代码到生产分支，部署生产环境
11. 生产运营（客户）验收
12. 验收完成，结项

## 三、具体操作

**1. 拉取代码**

一般都会在本地默认创建一个 master 分支

```shell
git clone https://code.xxx.com/xxx/xxx.git
```

**2. 初次开发需求前，要先拉取生产/预发分支，然后基于这个分支之上，创建自己的特性分支进行开发**

```shell
git fetch origin release:release
git checkout release
git checkout -b feat-0131-jack
```

此时，在你本地已经有了一个release 分支对应着远程仓库的release分支，还有一个内容基于release分支的特性分支，之后便可以在这个特性分支上进行需求开发了。

如果不是初次开发，本地已有生产/预发分支，则需要重新拉取远程的最新代码，然后再创建：

```shell
git checkout release
git pull origin release
git checkout -b feat-0229-jack
```

注意1：分支名称是有规范和含义的，不能乱取。

推荐格式：`分支责任-需求日期/需求号-开发人姓名`，一般按部门规范来，常见的有以下几种。

- feat：新功能
- fix：修补bug
- doc：文档
- refactor：重构（即不是新增功能，也不是像改bug的代码变动)
- test：测试

- chore：构建过程或辅助工具的变动

注意2：为啥拉取的是生产/预发分支

之所以要拉取release/uat 分支而不是拉取dev/test，是因为后者可能包含着一些其他成员还未上线或者可能有bug的需求代码，这些代码没有通过验证，如果被你给拉取了，然后又基于此进行新的需求开发，那当你需求开发完成。而其他成员的需求还没上线，你将会把这些未验证的代码一起发送到uat/release上，导致一系列问题。

