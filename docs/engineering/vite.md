# Vite

##  Vite 是什么？vue3 为什么选择 Vite？

> Vite 是一种新型前端构建工具，能够显著提升前端开发体验。

Vite是一个面向现代浏览器的更轻、更快的Web应用开发工具，它基于ECMAScript标准的原生模块系统（ES Modules）实现。Vite的出现是为了解决webpack在开发阶段使用webpack-dev-server**冷启动时间过长**，以及webpack HMR**热更新反应速度慢**的问题。

对于vue3.0选择Vite的原因，主要是因为Vite几乎不使用打包，而是使用了**原生ES Modules进行按需加载**。这种加载方式启动更快，且可以快速更新代码。此外，Vite还**支持TypeScript和CSS预编译**，可以很好地支持Vue 3.x的开发。因此，Vue 3.0选择了Vite作为其开发工具。



## vite和webpack区别

1. `开发模式不同`：Webpack在开发模式下会**对所有模块进行打包操作**，而Vite采用了**基于ES Module**的开发服务器，**只有在需要时才会编译对应的模块**。
2. `打包效率不同`：Webpack会**把所有的模块打包成一个bundle**，这会导致初次加载速度较慢，而Vite则利用了浏览器对ES Module的原生支持，**只打包和缓存实际改动的模块**，从而极大提高了打包效率。
3. `插件生态不同`：Webpack的插件生态非常丰富，有大量社区和官方插件可以选择，覆盖了前端开发的各个方面，而Vite的插件生态尽管在不断发展，但相比Webpack来说还显得较为稀少。
4. `配置复杂度不同`：Webpack的配置相对复杂，对新手不够友好，而Vite在设计上更注重开箱即用，大部分场景下用户无需自己写配置文件。
5. `热更新机制不同`：Webpack的热更新需要**整个模块链重新打包和替换**，对于大型项目可能会有延迟，而Vite的热更新则**只会针对改动的模块进行更新**，提高了更新速度。



##  Vite是如何提高打包效率的？

1. `开发环境下基于ES Module的动态编译`：Vite在开发环境下**利用了浏览器对ES Module的原生支持，通过动态解析和构建模块依赖关系图，只编译和打包当前模块及其依赖的模块**，而不需要对整个应用进行打包。这种方式可以大大减少打包时间和打包体积。
2. `生产环境下基于ESM的打包`：Vite在生产环境下**将所有模块打包成一个或多个浏览器原生支持的ES Module文件**。这种方式避免了传统打包工具需要进行代码转译和打包合并的步骤，保留了原始ES Module的结构和运行效率，进一步提高了打包效率和运行效率。
3. `模块缓存机制`：Vite在开发环境和生产环境下都使用了模块缓存机制，**对于已经加载过的模块不再重复加载和编译，而是直接使用缓存中的结果**。这样可以避免重复编译和加载已经加载过的模块，提高了打包效率和运行效率。
4. `针对Vue和React等框架的优化`：Vite针对Vue和React等框架的优化可以提高打包效率和运行效率。例如，**对于Vue单文件组件，Vite可以将其编译成ES Module，避免生成额外的文件和重复的代码**。

